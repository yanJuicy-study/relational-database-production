# 05 릴레이션 직교성

직교란 두 개 이상의 릴레이션이 같은 값을 갖지 않는 상태이다.

두 릴레이션이 모두 동일한 속성을 가지고 있더라도 내부 튜플의 값이 모두 다르면 해당 릴레이션들은 직교한다.

이때 속성들 간에 같은 값을 가지고 있는지 여부는 JOIN을 이용하면 파악이 가능하다. 

같은 값이 없다면(직교한다면) 공집합이 출력된다.

두 릴레이션의 일부 속성이 일치하고 해당 속성의 튜플 값들이 일치할때 직교성 여부 판단 -

6NF 단계까지 분해하면 더 이상 무손실 분해가 불가하므로 이후 튜플을 비교해중복의 여부를 판단한다. 

아래는 직교하지 않는 상태의 릴레이션이다.


| 이름 | 학년 | 클럽 |  |
| --- | --- | --- | --- |
| 김레알 | 1 | 검도부 |  |
| 김창식 | 2 | 유도부 |  |
| 김인정 | 3 | 검도부 |  |
| 김구라 | 4 | 신문부 |  |
|  |  |  |  |

| 이름 | 학과 | 학년 |
| --- | --- | --- |
| 김팩트 | 일반과 | 1 |
| 김사기 | 전문과 | 2 |
| 김오바 | 안과 | 3 |
| 김구라 | 사과 | 4 |
| 김레알 | 풋사과 | 1 |

직교하지 않는 경우 적절한 릴레이션의 통합(합집합)을 수행할 수 있다.

위의 릴레이션에 적용하면 이름,학년 속성 (중복된 속성) 을 가진 릴레이션으로 통합된다.

| 이름 | 학년 |
| --- | --- |
| 김팩트 | 1 |
| 김레알 | 1 |
| 김창식 | 2 |
| 김인정 | 3 |
| 김구라 | 4 |
| 김사기 | 2 |
| 김오바 | 3 |

6NF까지 분해해 동일한 형태(제목)의 릴레이션이

된 경우에도 튜플에 중복이 없다면 통합할 필요가 없다.

릴레이션 직교화를 위한 전략

1. 정규화 
    
    릴레이션의 직교성을 확인하려면 6NF까지 정규화하면 된다.
    

1. 칼럼명 통일 
    
    2-1. 명명규칙 통일
    
      한국어, 알파벳, 카멜 케이스, 스네이크 케이스 등 명명규칙을 통일시킨다.
    
    2-2. 주어 포함
    
       name, email 과 같이 범용적으로 쓰이는 이름의 경우 어떤 릴레이션의 속성인지를
    
       나타내기 위해 student_name, member_email 과 같이 사용한다.
    

직교성은 DB설계에 있어 중요한 개념이지만 반드시 모든 릴레이션을 직교화 할 필요는 없다.

직교화의 이점

릴레이션의 직교화를 통해 중복을 제거함으로써 얻을 수 있는 이점으로는 다음의 경우 등이 있다.

1. 변칙을 막을 수 있다.
    
    변칙이란 DB에 포함된 모순, 즉 DB내에 상반된 사실을 나타내는 명제가 포함된 경우이다.
    
    전제에 모순이 포함되어 있다면 질의 결과가 옳다고 보장할 수 없다.
    
2. 데이터 위치의 명확성.
    
    중복이 해결되면 한 개의 튜플이 나타내는 사실은 어떤 튜플에도 존재하지 않는다.
    
    따라서 질의해야 할 대상이 명확해진다.
    
    그렇지 않은 경우 어떤 사실을 질의하고 싶은지를 응용프로그램의 위치에서 판단해야 한다.
    
    졍규화되어 있지 않은 릴레이션에는 중복된 사실이 있으므로 응용프로그램은 그중 어떤 사실이
    
    필요한다 정해야 한다.
    
3. 선언적 쿼리 작성.
    
    쿼리의 작성이 ‘어떻게 데이터를 검색하는가’ 에서 ‘어떤 데이터가 필요한가’의 작업이 된다.
    
4. 불필요한 무손실 분해의 방지.
    
    릴레이션이 정규화되어 있지 않다는 것은 어떤 두 릴레이션의 JOIN의 결과가 그 릴레이션이 된다는 의미다.
    
    만약 필요한 데이터가 JOIN이전의 한 개의 릴레이션 뿐이라면
    
    먼저 무손실 분해 후 이후 다른 릴레이션과의 결합 등의 필요한 연산을 수행한다.
    
    이 과정에서 FROM 절에는 서브쿼리가 필연적이다.
    
    만약 정규화된 테이블이 있다면 서브쿼리 없이 SELECT의 기본형에 맞춰진 쿼리로 작성할 수 있다.
